<!DOCTYPE html>
<html>
    <head>
        <title>uControl Documentation 5.0 : Configure MariaDB / MySQL</title>
        <link rel="stylesheet" href="styles/site.css" type="text/css" />
        <META http-equiv="Content-Type" content="text/html; charset=UTF-8">
    </head>

    <body class="theme-default aui-theme-default">
        <div id="page">
            <div id="main" class="aui-page-panel">
                <div id="main-header">
                    <div id="breadcrumb-section">
                        <ol id="breadcrumbs">
                            <li class="first">
                                <span><a href="index.html">uControl Documentation 5.0</a></span>
                            </li>
                                                    <li>
                                <span><a href="Documentation_35418.html">Documentation</a></span>
                            </li>
                                                    <li>
                                <span><a href="Getting-Started_35164.html">Getting Started</a></span>
                            </li>
                                                    <li>
                                <span><a href="Installing-uControl_35160.html">Installing uControl</a></span>
                            </li>
                                                    <li>
                                <span><a href="Installing-uControl-Software_35158.html">Installing uControl Software</a></span>
                            </li>
                                                </ol>
                    </div>
                    <h1 id="title-heading" class="pagetitle">
                                                <span id="title-text">
                            uControl Documentation 5.0 : Configure MariaDB / MySQL
                        </span>
                    </h1>
                </div>

                <div id="content" class="view">
                    <div class="page-metadata">
                        
        
    
        
    
        
        
            Created by <span class='author'> Steve Hicks</span> on Jul 08, 2016
                        </div>
                    <div id="main-content" class="wiki-content group">
                    <div class="contentLayout2">
<div class="columnLayout single" data-layout="single">
<div class="cell normal" data-type="normal">
<div class="innerCell">
<h2 id="ConfigureMariaDB/MySQL-Configurethedatabase"><strong>Configure the database</strong></h2><h3 id="ConfigureMariaDB/MySQL-Createthedatabase:"><strong>Create the database:</strong></h3><ol><li><p>From the command line run &quot;mysql -u root -p&quot;<br/> </p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">ucontrol@ubuntu:~$ mysql -u root -p
Enter password: 
Welcome to the MySQL monitor.  Commands end with ; or \g.
Your MySQL connection id is 39
Server version: 5.5.34-0ubuntu0.12.04.1 (Ubuntu)


Copyright (c) 2000, 2013, Oracle and/or its affiliates. All
rights reserved.

Oracle is a registered trademark of Oracle Corporation
and/or its affiliates. Other names may be trademarks of their
respective owners.

Type &#39;help;&#39; or &#39;\h&#39; for help. Type &#39;\c&#39; to clear the
current input statement.


</pre>
</div></div></li><li><p>Create the database instance tekwurx<br/><br/></p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">mysql&gt; create database TekWurx;
Query OK, 1 row affected (0.00 sec)

</pre>
</div></div></li></ol></div>
</div>
</div>
<div class="columnLayout two-right-sidebar" data-layout="two-right-sidebar">
<div class="cell normal" data-type="normal">
<div class="innerCell">
<h2 id="ConfigureMariaDB/MySQL-ConfigureMYSQLWorkBench"><strong>Configure MYSQL WorkBench</strong></h2><ol><li>Launch mysql-workbench from the CLI</li><li>Under <strong>Server Administration</strong> select 'New Server Instance&quot;<br/><br/><span class="confluence-embedded-file-wrapper"><img class="confluence-embedded-image" src="attachments/34779/33714.png" data-image-src="https://testconftekwurx.atlassian.net/wiki/download/attachments/34779/image2014-1-1%2011%3A33%3A56.png?version=1&amp;modificationDate=1388576670000&amp;api=v2" data-unresolved-comment-count="0" data-linked-resource-id="33714" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="image2014-1-1 11:33:56.png" data-base-url="https://testconftekwurx.atlassian.net/wiki" data-linked-resource-content-type="image/png" data-linked-resource-container-id="34779" data-linked-resource-container-version="6"></span> <br/> </li><li>Click Next<br/><br/><span class="confluence-embedded-file-wrapper"><img class="confluence-embedded-image" src="attachments/34779/33710.png" data-image-src="https://testconftekwurx.atlassian.net/wiki/download/attachments/34779/image2014-1-1%2011%3A34%3A44.png?version=1&amp;modificationDate=1388576670000&amp;api=v2" data-unresolved-comment-count="0" data-linked-resource-id="33710" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="image2014-1-1 11:34:44.png" data-base-url="https://testconftekwurx.atlassian.net/wiki" data-linked-resource-content-type="image/png" data-linked-resource-container-id="34779" data-linked-resource-container-version="6"></span> <br/><br/><br/></li><li>Click Next<br/><br/><span class="confluence-embedded-file-wrapper"><img class="confluence-embedded-image" src="attachments/34779/33738.png" data-image-src="https://testconftekwurx.atlassian.net/wiki/download/attachments/34779/image2014-1-1%2011%3A35%3A2.png?version=1&amp;modificationDate=1388576670000&amp;api=v2" data-unresolved-comment-count="0" data-linked-resource-id="33738" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="image2014-1-1 11:35:2.png" data-base-url="https://testconftekwurx.atlassian.net/wiki" data-linked-resource-content-type="image/png" data-linked-resource-container-id="34779" data-linked-resource-container-version="6"></span> <br/><br/><br/></li><li>You will be asked to enter the root password which was set during the installation of MYSQL.</li><li>If all checks are successful click Next.<br/><br/><span class="confluence-embedded-file-wrapper"><img class="confluence-embedded-image" src="attachments/34779/33726.png" data-image-src="https://testconftekwurx.atlassian.net/wiki/download/attachments/34779/image2014-1-1%2011%3A37%3A58.png?version=1&amp;modificationDate=1388576670000&amp;api=v2" data-unresolved-comment-count="0" data-linked-resource-id="33726" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="image2014-1-1 11:37:58.png" data-base-url="https://testconftekwurx.atlassian.net/wiki" data-linked-resource-content-type="image/png" data-linked-resource-container-id="34779" data-linked-resource-container-version="6"></span><br/><br/></li><li>Specify the Operating System and MySQL package type<br/><br/><span class="confluence-embedded-file-wrapper"><img class="confluence-embedded-image" src="attachments/34779/33754.png" data-image-src="https://testconftekwurx.atlassian.net/wiki/download/attachments/34779/image2014-1-1%2011%3A39%3A3.png?version=1&amp;modificationDate=1388576670000&amp;api=v2" data-unresolved-comment-count="0" data-linked-resource-id="33754" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="image2014-1-1 11:39:3.png" data-base-url="https://testconftekwurx.atlassian.net/wiki" data-linked-resource-content-type="image/png" data-linked-resource-container-id="34779" data-linked-resource-container-version="6"></span><br/><br/></li><li>Click Next<br/><br/><span class="confluence-embedded-file-wrapper"><img class="confluence-embedded-image" src="attachments/34779/33750.png" data-image-src="https://testconftekwurx.atlassian.net/wiki/download/attachments/34779/image2014-1-1%2011%3A39%3A44.png?version=1&amp;modificationDate=1388576670000&amp;api=v2" data-unresolved-comment-count="0" data-linked-resource-id="33750" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="image2014-1-1 11:39:44.png" data-base-url="https://testconftekwurx.atlassian.net/wiki" data-linked-resource-content-type="image/png" data-linked-resource-container-id="34779" data-linked-resource-container-version="6"></span><br/><br/></li><li><p>If all steps are successful then click next<br/><br/></p><div class="confluence-information-macro confluence-information-macro-information"><span class="aui-icon aui-icon-small aui-iconfont-info confluence-information-macro-icon"></span><div class="confluence-information-macro-body"><p><strong>NOTE:</strong> Steps for SSH and windows management are skipped as they are not relevant for a linux 'Local&quot; setup.</p></div></div></li><li>Name the setup and click finish<br/><br/><span class="confluence-embedded-file-wrapper"><img class="confluence-embedded-image" src="attachments/34779/33746.png" data-image-src="https://testconftekwurx.atlassian.net/wiki/download/attachments/34779/image2014-1-1%2011%3A43%3A7.png?version=1&amp;modificationDate=1388576670000&amp;api=v2" data-unresolved-comment-count="0" data-linked-resource-id="33746" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="image2014-1-1 11:43:7.png" data-base-url="https://testconftekwurx.atlassian.net/wiki" data-linked-resource-content-type="image/png" data-linked-resource-container-id="34779" data-linked-resource-container-version="6"></span><br/><br/></li><li>You will now have configured a connection and server administration entry.<br/><br/><span class="confluence-embedded-file-wrapper"><img class="confluence-embedded-image" src="attachments/34779/33742.png" data-image-src="https://testconftekwurx.atlassian.net/wiki/download/attachments/34779/image2014-1-1%2011%3A43%3A59.png?version=1&amp;modificationDate=1388576670000&amp;api=v2" data-unresolved-comment-count="0" data-linked-resource-id="33742" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="image2014-1-1 11:43:59.png" data-base-url="https://testconftekwurx.atlassian.net/wiki" data-linked-resource-content-type="image/png" data-linked-resource-container-id="34779" data-linked-resource-container-version="6"></span><br/><br/> </li></ol></div>
</div>
<div class="cell aside" data-type="aside">
<div class="innerCell">
<p> </p></div>
</div>
</div>
<div class="columnLayout two-right-sidebar" data-layout="two-right-sidebar">
<div class="cell normal" data-type="normal">
<div class="innerCell">
<h3 id="ConfigureMariaDB/MySQL-CreateDatabaseUser">Create Database User</h3><ol><li>Open mysql-workbench</li><li>Select <strong>Manage Security</strong> from the Server Administration menu<br/><br/><span class="confluence-embedded-file-wrapper"><img class="confluence-embedded-image" src="attachments/34779/33770.png" data-image-src="https://testconftekwurx.atlassian.net/wiki/download/attachments/34779/image2014-1-1%2011%3A59%3A32.png?version=1&amp;modificationDate=1388577572000&amp;api=v2" data-unresolved-comment-count="0" data-linked-resource-id="33770" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="image2014-1-1 11:59:32.png" data-base-url="https://testconftekwurx.atlassian.net/wiki" data-linked-resource-content-type="image/png" data-linked-resource-container-id="34779" data-linked-resource-container-version="6"></span> <br/> </li><li>Select Users &amp; Privileges under the Security menu and click 'Add Account'<br/><br/><span class="confluence-embedded-file-wrapper"><img class="confluence-embedded-image" src="attachments/34779/33766.png" data-image-src="https://testconftekwurx.atlassian.net/wiki/download/attachments/34779/image2014-1-1%2012%3A2%3A52.png?version=1&amp;modificationDate=1388577772000&amp;api=v2" data-unresolved-comment-count="0" data-linked-resource-id="33766" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="image2014-1-1 12:2:52.png" data-base-url="https://testconftekwurx.atlassian.net/wiki" data-linked-resource-content-type="image/png" data-linked-resource-container-id="34779" data-linked-resource-container-version="6"></span> <br/> </li><li><p>Enter the login name and password and set 'Limit Connectivity' to localhost.</p><div class="confluence-information-macro confluence-information-macro-information"><span class="aui-icon aui-icon-small aui-iconfont-info confluence-information-macro-icon"></span><div class="confluence-information-macro-body"><p><strong>NOTE:</strong> These login details will be needed during the uControl software installation</p></div></div></li><li>Add the new user to the DBA role and click Apply<br/><br/><span class="confluence-embedded-file-wrapper"><img class="confluence-embedded-image" src="attachments/34779/33762.png" data-image-src="https://testconftekwurx.atlassian.net/wiki/download/attachments/34779/image2014-1-1%2012%3A5%3A0.png?version=1&amp;modificationDate=1388577899000&amp;api=v2" data-unresolved-comment-count="0" data-linked-resource-id="33762" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="image2014-1-1 12:5:0.png" data-base-url="https://testconftekwurx.atlassian.net/wiki" data-linked-resource-content-type="image/png" data-linked-resource-container-id="34779" data-linked-resource-container-version="6"></span> <br/> </li><li>Exit from mysql-workbench</li></ol></div>
</div>
<div class="cell aside" data-type="aside">
<div class="innerCell">
<p> </p></div>
</div>
</div>
<div class="columnLayout two-right-sidebar" data-layout="two-right-sidebar">
<div class="cell normal" data-type="normal">
<div class="innerCell">
<h3 id="ConfigureMariaDB/MySQL-ConfigurethedatabaseforuControl"><strong>Configure the database for uControl</strong></h3><ol><li>Open mysql-workbench</li><li>Double click the connection defined under 'SQL development'</li><li><p>Execute the following SQL against the tekwurx database:</p><p>#<br/> # Quartz seems to work best with the driver mm.mysql-2.0.7-bin.jar<br/> #<br/> # In your Quartz properties file, you'll need to set <br/> # org.quartz.jobStore.driverDelegateClass = org.quartz.impl.jdbcjobstore.StdJDBCDelegate<br/> #<br/> <br/><br/> DROP TABLE IF EXISTS QRTZ_JOB_LISTENERS;<br/> DROP TABLE IF EXISTS QRTZ_TRIGGER_LISTENERS;<br/> DROP TABLE IF EXISTS QRTZ_FIRED_TRIGGERS;<br/> DROP TABLE IF EXISTS QRTZ_PAUSED_TRIGGER_GRPS;<br/> DROP TABLE IF EXISTS QRTZ_SCHEDULER_STATE;<br/> DROP TABLE IF EXISTS QRTZ_LOCKS;<br/> DROP TABLE IF EXISTS QRTZ_SIMPLE_TRIGGERS;<br/> DROP TABLE IF EXISTS QRTZ_CRON_TRIGGERS;<br/> DROP TABLE IF EXISTS QRTZ_BLOB_TRIGGERS;<br/> DROP TABLE IF EXISTS QRTZ_TRIGGERS;<br/> DROP TABLE IF EXISTS QRTZ_JOB_DETAILS;<br/> DROP TABLE IF EXISTS QRTZ_CALENDARS;<br/> DROP TABLE IF EXISTS TEK_CALENDAR;<br/> <br/><br/> CREATE TABLE QRTZ_JOB_DETAILS<br/> (<br/> JOB_NAME VARCHAR(200) NOT NULL,<br/> JOB_GROUP VARCHAR(200) NOT NULL,<br/> DESCRIPTION VARCHAR(250) NULL,<br/> JOB_CLASS_NAME VARCHAR(250) NOT NULL,<br/> IS_DURABLE VARCHAR(1) NOT NULL,<br/> IS_VOLATILE VARCHAR(1) NOT NULL,<br/> IS_STATEFUL VARCHAR(1) NOT NULL,<br/> REQUESTS_RECOVERY VARCHAR(1) NOT NULL,<br/> JOB_DATA BLOB NULL,<br/> PRIMARY KEY (JOB_NAME,JOB_GROUP)<br/> );<br/> <br/><br/> CREATE TABLE QRTZ_JOB_LISTENERS<br/> (<br/> JOB_NAME VARCHAR(200) NOT NULL,<br/> JOB_GROUP VARCHAR(200) NOT NULL,<br/> JOB_LISTENER VARCHAR(200) NOT NULL,<br/> PRIMARY KEY (JOB_NAME,JOB_GROUP,JOB_LISTENER),<br/> FOREIGN KEY (JOB_NAME,JOB_GROUP)<br/> REFERENCES QRTZ_JOB_DETAILS(JOB_NAME,JOB_GROUP)<br/> );<br/> <br/><br/> CREATE TABLE QRTZ_TRIGGERS<br/> (<br/> TRIGGER_NAME VARCHAR(200) NOT NULL,<br/> TRIGGER_GROUP VARCHAR(200) NOT NULL,<br/> JOB_NAME VARCHAR(200) NOT NULL,<br/> JOB_GROUP VARCHAR(200) NOT NULL,<br/> IS_VOLATILE VARCHAR(1) NOT NULL,<br/> DESCRIPTION VARCHAR(250) NULL,<br/> NEXT_FIRE_TIME BIGINT(13) NULL,<br/> PREV_FIRE_TIME BIGINT(13) NULL,<br/> PRIORITY INTEGER NULL,<br/> TRIGGER_STATE VARCHAR(16) NOT NULL,<br/> TRIGGER_TYPE VARCHAR(8) NOT NULL,<br/> START_TIME BIGINT(13) NOT NULL,<br/> END_TIME BIGINT(13) NULL,<br/> CALENDAR_NAME VARCHAR(200) NULL,<br/> MISFIRE_INSTR SMALLINT(2) NULL,<br/> JOB_DATA BLOB NULL,<br/> PRIMARY KEY (TRIGGER_NAME,TRIGGER_GROUP),<br/> FOREIGN KEY (JOB_NAME,JOB_GROUP)<br/> REFERENCES QRTZ_JOB_DETAILS(JOB_NAME,JOB_GROUP)<br/> );<br/> <br/><br/> CREATE TABLE QRTZ_SIMPLE_TRIGGERS<br/> (<br/> TRIGGER_NAME VARCHAR(200) NOT NULL,<br/> TRIGGER_GROUP VARCHAR(200) NOT NULL,<br/> REPEAT_COUNT BIGINT(7) NOT NULL,<br/> REPEAT_INTERVAL BIGINT(12) NOT NULL,<br/> TIMES_TRIGGERED BIGINT(10) NOT NULL,<br/> PRIMARY KEY (TRIGGER_NAME,TRIGGER_GROUP),<br/> FOREIGN KEY (TRIGGER_NAME,TRIGGER_GROUP)<br/> REFERENCES QRTZ_TRIGGERS(TRIGGER_NAME,TRIGGER_GROUP)<br/> );<br/> <br/><br/> CREATE TABLE QRTZ_CRON_TRIGGERS<br/> (<br/> TRIGGER_NAME VARCHAR(200) NOT NULL,<br/> TRIGGER_GROUP VARCHAR(200) NOT NULL,<br/> CRON_EXPRESSION VARCHAR(200) NOT NULL,<br/> TIME_ZONE_ID VARCHAR(80),<br/> PRIMARY KEY (TRIGGER_NAME,TRIGGER_GROUP),<br/> FOREIGN KEY (TRIGGER_NAME,TRIGGER_GROUP)<br/> REFERENCES QRTZ_TRIGGERS(TRIGGER_NAME,TRIGGER_GROUP)<br/> );<br/> <br/><br/> CREATE TABLE QRTZ_BLOB_TRIGGERS<br/> (<br/> TRIGGER_NAME VARCHAR(200) NOT NULL,<br/> TRIGGER_GROUP VARCHAR(200) NOT NULL,<br/> BLOB_DATA BLOB NULL,<br/> PRIMARY KEY (TRIGGER_NAME,TRIGGER_GROUP),<br/> FOREIGN KEY (TRIGGER_NAME,TRIGGER_GROUP)<br/> REFERENCES QRTZ_TRIGGERS(TRIGGER_NAME,TRIGGER_GROUP)<br/> );<br/> <br/><br/> CREATE TABLE QRTZ_TRIGGER_LISTENERS<br/> (<br/> TRIGGER_NAME VARCHAR(200) NOT NULL,<br/> TRIGGER_GROUP VARCHAR(200) NOT NULL,<br/> TRIGGER_LISTENER VARCHAR(200) NOT NULL,<br/> PRIMARY KEY (TRIGGER_NAME,TRIGGER_GROUP,TRIGGER_LISTENER),<br/> FOREIGN KEY (TRIGGER_NAME,TRIGGER_GROUP)<br/> REFERENCES QRTZ_TRIGGERS(TRIGGER_NAME,TRIGGER_GROUP)<br/> );<br/> <br/><br/> <br/><br/> CREATE TABLE QRTZ_CALENDARS<br/> (<br/> CALENDAR_NAME VARCHAR(200) NOT NULL,<br/> CALENDAR BLOB NOT NULL,<br/> PRIMARY KEY (CALENDAR_NAME)<br/> );<br/> <br/><br/> <br/><br/> <br/><br/> CREATE TABLE QRTZ_PAUSED_TRIGGER_GRPS<br/> (<br/> TRIGGER_GROUP VARCHAR(200) NOT NULL, <br/> PRIMARY KEY (TRIGGER_GROUP)<br/> );<br/> <br/><br/> CREATE TABLE QRTZ_FIRED_TRIGGERS<br/> (<br/> ENTRY_ID VARCHAR(95) NOT NULL,<br/> TRIGGER_NAME VARCHAR(200) NOT NULL,<br/> TRIGGER_GROUP VARCHAR(200) NOT NULL,<br/> IS_VOLATILE VARCHAR(1) NOT NULL,<br/> INSTANCE_NAME VARCHAR(200) NOT NULL,<br/> FIRED_TIME BIGINT(13) NOT NULL,<br/> PRIORITY INTEGER NOT NULL,<br/> STATE VARCHAR(16) NOT NULL,<br/> JOB_NAME VARCHAR(200) NULL,<br/> JOB_GROUP VARCHAR(200) NULL,<br/> IS_STATEFUL VARCHAR(1) NULL,<br/> REQUESTS_RECOVERY VARCHAR(1) NULL,<br/> PRIMARY KEY (ENTRY_ID)<br/> );<br/> <br/><br/> CREATE TABLE QRTZ_SCHEDULER_STATE<br/> (<br/> INSTANCE_NAME VARCHAR(200) NOT NULL,<br/> LAST_CHECKIN_TIME BIGINT(13) NOT NULL,<br/> CHECKIN_INTERVAL BIGINT(13) NOT NULL,<br/> PRIMARY KEY (INSTANCE_NAME)<br/> );<br/> <br/><br/> CREATE TABLE QRTZ_LOCKS<br/> (<br/> LOCK_NAME VARCHAR(40) NOT NULL, <br/> PRIMARY KEY (LOCK_NAME)<br/> );<br/> <br/><br/> <br/><br/> INSERT INTO QRTZ_LOCKS values('TRIGGER_ACCESS');<br/> INSERT INTO QRTZ_LOCKS values('JOB_ACCESS');<br/> INSERT INTO QRTZ_LOCKS values('CALENDAR_ACCESS');<br/> INSERT INTO QRTZ_LOCKS values('STATE_ACCESS');<br/> INSERT INTO QRTZ_LOCKS values('MISFIRE_ACCESS');<br/> <br/><br/> CREATE TABLE TEK_CALENDAR (<br/> dt DATE NOT NULL PRIMARY KEY,<br/> y SMALLINT NULL,<br/> q tinyint NULL,<br/> m tinyint NULL,<br/> d tinyint NULL,<br/> dw tinyint NULL,<br/> monthName VARCHAR(9) NULL,<br/> dayName VARCHAR(9) NULL,<br/> w tinyint NULL,<br/> isWeekday BINARY(1) NULL,<br/> isHoliday BINARY(1) NULL,<br/> holidayDescr VARCHAR(32) NULL,<br/> isPayday BINARY(1) NULL<br/> );<br/> <br/><br/> CREATE TABLE ints ( i tinyint );<br/> <br/> INSERT INTO ints VALUES (0),(1),(2),(3),(4),(5),(6),(7),(8),(9);<br/> <br/> INSERT INTO TEK_CALENDAR (dt)<br/> SELECT DATE('2010-01-01') + INTERVAL a.i*10000 + b.i*1000 + c.i*100 + d.i*10 + e.i DAY<br/> FROM ints a JOIN ints b JOIN ints c JOIN ints d JOIN ints e<br/> WHERE (a.i*10000 + b.i*1000 + c.i*100 + d.i*10 + e.i) &lt;= 11322<br/> ORDER BY 1;<br/> <br/><br/> UPDATE TEK_CALENDAR<br/> SET isWeekday = CASE WHEN dayofweek(dt) IN (1,7) THEN 0 ELSE 1 END,<br/> isHoliday = 0,<br/> isPayday = 0,<br/> y = YEAR(dt),<br/> q = quarter(dt),<br/> m = MONTH(dt),<br/> d = dayofmonth(dt),<br/> dw = dayofweek(dt),<br/> monthname = monthname(dt),<br/> dayname = dayname(dt),<br/> w = week(dt),<br/> holidayDescr = '';<br/> <br/><br/> DROP TABLE IF EXISTS ints;<br/> <br/><br/> commit;</p></li><li><p>Confirm that the tables have been created under the tekwurx database</p><p><br/><span class="confluence-embedded-file-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image" width="500" src="attachments/34779/33758.png" data-image-src="https://testconftekwurx.atlassian.net/wiki/download/attachments/34779/image2014-1-1%2012%3A16%3A51.png?version=1&amp;modificationDate=1388578611000&amp;api=v2" data-unresolved-comment-count="0" data-linked-resource-id="33758" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="image2014-1-1 12:16:51.png" data-base-url="https://testconftekwurx.atlassian.net/wiki" data-linked-resource-content-type="image/png" data-linked-resource-container-id="34779" data-linked-resource-container-version="6"></span> <br/><br/></p><div class="confluence-information-macro confluence-information-macro-information"><span class="aui-icon aui-icon-small aui-iconfont-info confluence-information-macro-icon"></span><div class="confluence-information-macro-body"><p><strong>NOTE: </strong>You may need to refresh the view by right clicking on the database name and selecting 'Refresh All'</p></div></div></li><li>Exit mysql-workbench.</li></ol></div>
</div>
<div class="cell aside" data-type="aside">
<div class="innerCell">
<p> </p></div>
</div>
</div>
<div class="columnLayout two-right-sidebar" data-layout="two-right-sidebar">
<div class="cell normal" data-type="normal">
<div class="innerCell">
<h2 id="ConfigureMariaDB/MySQL-ConfigureMYSQLCLI"><strong>Configure MYSQL CLI</strong></h2><ol><li><p>Login to mysql </p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">mysql -u root -p</pre>
</div></div><div class="confluence-information-macro confluence-information-macro-information"><span class="aui-icon aui-icon-small aui-iconfont-info confluence-information-macro-icon"></span><div class="confluence-information-macro-body"><p>Using the root account created during install of MySQL, default root password is blank (Press enter)</p></div></div></li><li><p>Create the TekWurx Database</p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">CREATE DATABASE TekWurx;</pre>
</div></div></li><li><p>Create and assign privileges to the tekwurx user for the TekWurx Schema</p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">GRANT ALL ON TekWurx.* TO tekwurx@&#39;localhost&#39; IDENTIFIED BY &#39;TekWurx1uControl&#39;;</pre>
</div></div></li><li><p>Logout of mysql</p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">exit</pre>
</div></div></li><li><p>Copy the following SQL script in to a file called script.sql:<br/><br/></p><div class="panel" style="border-width: 1px;"><div class="panelContent">
<p class="p1">#</p><p class="p1"># Quartz seems to work best <span class="s1">with</span> the driver mm.mysql-2.0.7-bin.jar</p><p class="p1">#</p><p class="p1"># In your Quartz properties file, you<span class="s2">'ll need to set </span></p><p class="p2"># org.quartz.jobStore.driverDelegateClass = org.quartz.impl.jdbcjobstore.StdJDBCDelegate</p><p class="p2">#</p><p class="p3"> </p><p class="p2">DROP TABLE IF EXISTS QRTZ_JOB_LISTENERS;</p><p class="p2">DROP TABLE IF EXISTS QRTZ_TRIGGER_LISTENERS;</p><p class="p2">DROP TABLE IF EXISTS QRTZ_FIRED_TRIGGERS;</p><p class="p2">DROP TABLE IF EXISTS QRTZ_PAUSED_TRIGGER_GRPS;</p><p class="p2">DROP TABLE IF EXISTS QRTZ_SCHEDULER_STATE;</p><p class="p2">DROP TABLE IF EXISTS QRTZ_LOCKS;</p><p class="p2">DROP TABLE IF EXISTS QRTZ_SIMPLE_TRIGGERS;</p><p class="p2">DROP TABLE IF EXISTS QRTZ_CRON_TRIGGERS;</p><p class="p2">DROP TABLE IF EXISTS QRTZ_BLOB_TRIGGERS;</p><p class="p2">DROP TABLE IF EXISTS QRTZ_TRIGGERS;</p><p class="p2">DROP TABLE IF EXISTS QRTZ_JOB_DETAILS;</p><p class="p2">DROP TABLE IF EXISTS QRTZ_CALENDARS;</p><p class="p2">DROP TABLE IF EXISTS TEK_CALENDAR;</p><p class="p3"> </p><p class="p2">CREATE TABLE QRTZ_JOB_DETAILS</p><p class="p2">  (</p><p class="p2">    JOB_NAME  VARCHAR(200) NOT NULL,</p><p class="p2">    JOB_GROUP VARCHAR(200) NOT NULL,</p><p class="p2">    DESCRIPTION VARCHAR(250) NULL,</p><p class="p2">    JOB_CLASS_NAME   VARCHAR(250) NOT NULL,</p><p class="p2">    IS_DURABLE VARCHAR(1) NOT NULL,</p><p class="p2">    IS_VOLATILE VARCHAR(1) NOT NULL,</p><p class="p2">    IS_STATEFUL VARCHAR(1) NOT NULL,</p><p class="p2">    REQUESTS_RECOVERY VARCHAR(1) NOT NULL,</p><p class="p2">    JOB_DATA BLOB NULL,</p><p class="p2">    PRIMARY KEY (JOB_NAME,JOB_GROUP)</p><p class="p2">);</p><p class="p3"> </p><p class="p2">CREATE TABLE QRTZ_JOB_LISTENERS</p><p class="p2">  (</p><p class="p2">    JOB_NAME  VARCHAR(200) NOT NULL,</p><p class="p2">    JOB_GROUP VARCHAR(200) NOT NULL,</p><p class="p2">    JOB_LISTENER VARCHAR(200) NOT NULL,</p><p class="p2">    PRIMARY KEY (JOB_NAME,JOB_GROUP,JOB_LISTENER),</p><p class="p2">    FOREIGN KEY (JOB_NAME,JOB_GROUP)</p><p class="p2">        REFERENCES QRTZ_JOB_DETAILS(JOB_NAME,JOB_GROUP)</p><p class="p2">);</p><p class="p3"> </p><p class="p2">CREATE TABLE QRTZ_TRIGGERS</p><p class="p2">  (</p><p class="p2">    TRIGGER_NAME VARCHAR(200) NOT NULL,</p><p class="p2">    TRIGGER_GROUP VARCHAR(200) NOT NULL,</p><p class="p2">    JOB_NAME  VARCHAR(200) NOT NULL,</p><p class="p2">    JOB_GROUP VARCHAR(200) NOT NULL,</p><p class="p2">    IS_VOLATILE VARCHAR(1) NOT NULL,</p><p class="p2">    DESCRIPTION VARCHAR(250) NULL,</p><p class="p2">    NEXT_FIRE_TIME BIGINT(13) NULL,</p><p class="p2">    PREV_FIRE_TIME BIGINT(13) NULL,</p><p class="p2">    PRIORITY INTEGER NULL,</p><p class="p2">    TRIGGER_STATE VARCHAR(16) NOT NULL,</p><p class="p2">    TRIGGER_TYPE VARCHAR(8) NOT NULL,</p><p class="p2">    START_TIME BIGINT(13) NOT NULL,</p><p class="p2">    END_TIME BIGINT(13) NULL,</p><p class="p2">    CALENDAR_NAME VARCHAR(200) NULL,</p><p class="p2">    MISFIRE_INSTR SMALLINT(2) NULL,</p><p class="p2">    JOB_DATA BLOB NULL,</p><p class="p2">    PRIMARY KEY (TRIGGER_NAME,TRIGGER_GROUP),</p><p class="p2">    FOREIGN KEY (JOB_NAME,JOB_GROUP)</p><p class="p2">        REFERENCES QRTZ_JOB_DETAILS(JOB_NAME,JOB_GROUP)</p><p class="p2">);</p><p class="p3"> </p><p class="p2">CREATE TABLE QRTZ_SIMPLE_TRIGGERS</p><p class="p2">  (</p><p class="p2">    TRIGGER_NAME VARCHAR(200) NOT NULL,</p><p class="p2">    TRIGGER_GROUP VARCHAR(200) NOT NULL,</p><p class="p2">    REPEAT_COUNT BIGINT(7) NOT NULL,</p><p class="p2">    REPEAT_INTERVAL BIGINT(12) NOT NULL,</p><p class="p2">    TIMES_TRIGGERED BIGINT(10) NOT NULL,</p><p class="p2">    PRIMARY KEY (TRIGGER_NAME,TRIGGER_GROUP),</p><p class="p2">    FOREIGN KEY (TRIGGER_NAME,TRIGGER_GROUP)</p><p class="p2">        REFERENCES QRTZ_TRIGGERS(TRIGGER_NAME,TRIGGER_GROUP)</p><p class="p2">);</p><p class="p3"> </p><p class="p2">CREATE TABLE QRTZ_CRON_TRIGGERS</p><p class="p2">  (</p><p class="p2">    TRIGGER_NAME VARCHAR(200) NOT NULL,</p><p class="p2">    TRIGGER_GROUP VARCHAR(200) NOT NULL,</p><p class="p2">    CRON_EXPRESSION VARCHAR(200) NOT NULL,</p><p class="p2">    TIME_ZONE_ID VARCHAR(80),</p><p class="p2">    PRIMARY KEY (TRIGGER_NAME,TRIGGER_GROUP),</p><p class="p2">    FOREIGN KEY (TRIGGER_NAME,TRIGGER_GROUP)</p><p class="p2">        REFERENCES QRTZ_TRIGGERS(TRIGGER_NAME,TRIGGER_GROUP)</p><p class="p2">);</p><p class="p3"> </p><p class="p2">CREATE TABLE QRTZ_BLOB_TRIGGERS</p><p class="p2">  (</p><p class="p2">    TRIGGER_NAME VARCHAR(200) NOT NULL,</p><p class="p2">    TRIGGER_GROUP VARCHAR(200) NOT NULL,</p><p class="p2">    BLOB_DATA BLOB NULL,</p><p class="p2">    PRIMARY KEY (TRIGGER_NAME,TRIGGER_GROUP),</p><p class="p2">    FOREIGN KEY (TRIGGER_NAME,TRIGGER_GROUP)</p><p class="p2">        REFERENCES QRTZ_TRIGGERS(TRIGGER_NAME,TRIGGER_GROUP)</p><p class="p2">);</p><p class="p3"> </p><p class="p2">CREATE TABLE QRTZ_TRIGGER_LISTENERS</p><p class="p2">  (</p><p class="p2">    TRIGGER_NAME  VARCHAR(200) NOT NULL,</p><p class="p2">    TRIGGER_GROUP VARCHAR(200) NOT NULL,</p><p class="p2">    TRIGGER_LISTENER VARCHAR(200) NOT NULL,</p><p class="p2">    PRIMARY KEY (TRIGGER_NAME,TRIGGER_GROUP,TRIGGER_LISTENER),</p><p class="p2">    FOREIGN KEY (TRIGGER_NAME,TRIGGER_GROUP)</p><p class="p2">        REFERENCES QRTZ_TRIGGERS(TRIGGER_NAME,TRIGGER_GROUP)</p><p class="p2">);</p><p class="p3"> </p><p class="p3"> </p><p class="p2">CREATE TABLE QRTZ_CALENDARS</p><p class="p2">  (</p><p class="p2">    CALENDAR_NAME  VARCHAR(200) NOT NULL,</p><p class="p2">    CALENDAR BLOB NOT NULL,</p><p class="p2">    PRIMARY KEY (CALENDAR_NAME)</p><p class="p2">);</p><p class="p3"> </p><p class="p3"> </p><p class="p3"> </p><p class="p2">CREATE TABLE QRTZ_PAUSED_TRIGGER_GRPS</p><p class="p2">  (</p><p class="p2">    TRIGGER_GROUP  VARCHAR(200) NOT NULL, </p><p class="p2">    PRIMARY KEY (TRIGGER_GROUP)</p><p class="p2">);</p><p class="p3"> </p><p class="p2">CREATE TABLE QRTZ_FIRED_TRIGGERS</p><p class="p2">  (</p><p class="p2">    ENTRY_ID VARCHAR(95) NOT NULL,</p><p class="p2">    TRIGGER_NAME VARCHAR(200) NOT NULL,</p><p class="p2">    TRIGGER_GROUP VARCHAR(200) NOT NULL,</p><p class="p2">    IS_VOLATILE VARCHAR(1) NOT NULL,</p><p class="p2">    INSTANCE_NAME VARCHAR(200) NOT NULL,</p><p class="p2">    FIRED_TIME BIGINT(13) NOT NULL,</p><p class="p2">    PRIORITY INTEGER NOT NULL,</p><p class="p2">    STATE VARCHAR(16) NOT NULL,</p><p class="p2">    JOB_NAME VARCHAR(200) NULL,</p><p class="p2">    JOB_GROUP VARCHAR(200) NULL,</p><p class="p2">    IS_STATEFUL VARCHAR(1) NULL,</p><p class="p2">    REQUESTS_RECOVERY VARCHAR(1) NULL,</p><p class="p2">    PRIMARY KEY (ENTRY_ID)</p><p class="p2">);</p><p class="p3"> </p><p class="p2">CREATE TABLE QRTZ_SCHEDULER_STATE</p><p class="p2">  (</p><p class="p2">    INSTANCE_NAME VARCHAR(200) NOT NULL,</p><p class="p2">    LAST_CHECKIN_TIME BIGINT(13) NOT NULL,</p><p class="p2">    CHECKIN_INTERVAL BIGINT(13) NOT NULL,</p><p class="p2">    PRIMARY KEY (INSTANCE_NAME)</p><p class="p2">);</p><p class="p3"> </p><p class="p2">CREATE TABLE QRTZ_LOCKS</p><p class="p2">  (</p><p class="p2">    LOCK_NAME  VARCHAR(40) NOT NULL, </p><p class="p2">    PRIMARY KEY (LOCK_NAME)</p><p class="p2">);</p><p class="p3"> </p><p class="p3"> </p><p class="p2">INSERT INTO QRTZ_LOCKS values('<span class="s3">TRIGGER_ACCESS</span>');</p><p class="p2">INSERT INTO QRTZ_LOCKS values('<span class="s3">JOB_ACCESS</span>');</p><p class="p2">INSERT INTO QRTZ_LOCKS values('<span class="s3">CALENDAR_ACCESS</span>');</p><p class="p2">INSERT INTO QRTZ_LOCKS values('<span class="s3">STATE_ACCESS</span>');</p><p class="p2">INSERT INTO QRTZ_LOCKS values('<span class="s3">MISFIRE_ACCESS</span>');</p><p class="p3"> </p><p class="p2">CREATE TABLE TEK_CALENDAR (</p><p class="p2"><span class="Apple-tab-span"> </span>dt DATE NOT NULL PRIMARY KEY,</p><p class="p2"><span class="Apple-tab-span"> </span>y SMALLINT NULL,</p><p class="p2"><span class="Apple-tab-span"> </span>q tinyint NULL,</p><p class="p2"><span class="Apple-tab-span"> </span>m tinyint NULL,</p><p class="p2"><span class="Apple-tab-span"> </span>d tinyint NULL,</p><p class="p2"><span class="Apple-tab-span"> </span>dw tinyint NULL,</p><p class="p2"><span class="Apple-tab-span"> </span>monthName VARCHAR(9) NULL,</p><p class="p2"><span class="Apple-tab-span"> </span>dayName VARCHAR(9) NULL,</p><p class="p2"><span class="Apple-tab-span"> </span>w tinyint NULL,</p><p class="p2"><span class="Apple-tab-span"> </span>isWeekday BINARY(1) NULL,</p><p class="p2"><span class="Apple-tab-span"> </span>isHoliday BINARY(1) NULL,</p><p class="p2"><span class="Apple-tab-span"> </span>holidayDescr VARCHAR(32) NULL,</p><p class="p2"><span class="Apple-tab-span"> </span>isPayday BINARY(1) NULL</p><p class="p2">);</p><p class="p3"> </p><p class="p2">CREATE TABLE ints ( i tinyint );</p><p class="p4"> </p><p class="p2">INSERT INTO ints VALUES (0),(1),(2),(3),(4),(5),(6),(7),(8),(9);</p><p class="p4"> </p><p class="p2">INSERT INTO TEK_CALENDAR (dt)</p><p class="p2">SELECT DATE('<span class="s3">2010-01-01</span>') + INTERVAL a.i*10000 + b.i*1000 + c.i*100 + d.i*10 + e.i DAY</p><p class="p2">FROM ints a JOIN ints b JOIN ints c JOIN ints d JOIN ints e</p><p class="p2">WHERE (a.i*10000 + b.i*1000 + c.i*100 + d.i*10 + e.i) &lt;= 11322</p><p class="p2">ORDER BY 1;</p><p class="p3"> </p><p class="p2">UPDATE TEK_CALENDAR</p><p class="p2">SET isWeekday = CASE WHEN dayofweek(dt) IN (1,7) THEN 0 ELSE 1 END,</p><p class="p2"><span class="Apple-tab-span"> </span>isHoliday = 0,</p><p class="p2"><span class="Apple-tab-span"> </span>isPayday = 0,</p><p class="p2"><span class="Apple-tab-span"> </span>y = YEAR(dt),</p><p class="p2"><span class="Apple-tab-span"> </span>q = quarter(dt),</p><p class="p2"><span class="Apple-tab-span"> </span>m = MONTH(dt),</p><p class="p2"><span class="Apple-tab-span"> </span>d = dayofmonth(dt),</p><p class="p2"><span class="Apple-tab-span"> </span>dw = dayofweek(dt),</p><p class="p2"><span class="Apple-tab-span"> </span>monthname = monthname(dt),</p><p class="p2"><span class="Apple-tab-span"> </span>dayname = dayname(dt),</p><p class="p2"><span class="Apple-tab-span"> </span>w = week(dt),</p><p class="p2"><span class="Apple-tab-span"> </span>holidayDescr = '';</p><p class="p3"> </p><p class="p2">DROP TABLE IF EXISTS ints;</p><p class="p3"> </p><p class="p2">commit;</p>
</div></div></li><li><p>Run the create script.sql file against the TekWurx schema using the tekwurx account</p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">mysql TekWurx -u tekwurx -p &lt; script.sql</pre>
</div></div><div class="confluence-information-macro confluence-information-macro-information"><span class="aui-icon aui-icon-small aui-iconfont-info confluence-information-macro-icon"></span><div class="confluence-information-macro-body"><p>Using the password : TekWurx1uControl</p></div></div></li></ol><p> </p></div>
</div>
<div class="cell aside" data-type="aside">
<div class="innerCell">
<p> </p></div>
</div>
</div>
</div>
                    </div>

                    
                 
                </div>             </div> 
            <div id="footer" role="contentinfo">
                <section class="footer-body">
                    <p>Document generated by Confluence on Oct 11, 2016 11:10</p>
                    <div id="footer-logo"><a href="http://www.atlassian.com/">Atlassian</a></div>
                </section>
            </div>
        </div>     </body>
</html>
